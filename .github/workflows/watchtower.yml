name: Fetch Bac PDFs

on:
  schedule:
    # Runs at 15:05 Europe/Bucharest (12:05 UTC), on Weekdays only for March, May, June, August.
    - cron: '5 12 * 3,5,6,7,8,11 1-5'
  workflow_dispatch: {}

jobs:
  fetch-and-update:
    runs-on: ubuntu-latest
    
    permissions:
      contents: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          sparse-checkout: |
            web-scraper
            files

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.12'

      - name: Install dependencies
        run: |
          pip install requests beautifulsoup4

      - name: Run Fetch Script
        run: python web-scraper/main.py

      # - name: Commit and Push changes
      #   uses: stefanzweifel/git-auto-commit-action@v5
      #   with:
      #     commit_message: "ðŸ¤– Auto-fetch: New BAC exam files for ${{ steps.date.outputs.date }}"
      #     file_pattern: 'files/*'
      #     skip_dirty_check: false
      #     create_branch: false