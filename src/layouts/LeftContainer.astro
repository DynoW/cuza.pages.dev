---
import CountdownTimer from "../components/CountdownTimer.astro";
---

<div class="flex flex-col justify-center max-w-full basis-1/3 min-w-52 mb-2.5 gap-2">
    <div class="bg-[rgba(10,13,16,.9)] rounded-3xl py-5">
        <div class="mx-5 flex flex-col">
            <slot />
        </div>
    </div>
    <div class="flex flex-col gap-2">
        {import.meta.env.PROD && (
            <>
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1687540397754088"
                crossorigin="anonymous"></script>
                <div id="ad" class="top-2">
                    <CountdownTimer />
                    <!-- banner-ad-1-vertical -->
                    <ins class="adsbygoogle"
                        style="display:block"
                        data-ad-client="ca-pub-1687540397754088"
                        data-ad-slot="5482915098"
                        data-ad-format="auto"
                        data-full-width-responsive="true"></ins>
                    <script is:inline>
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>
                <script>
                    const ad = document.getElementById("ad");
                    let adOriginalTop = 780;
                    
                    if (ad) {
                        adOriginalTop = ad.getBoundingClientRect().top + window.scrollY;
                    }

                    window.addEventListener('scroll', () => {
                        if(ad && window.innerWidth > 768) {
                            const scrollY = window.scrollY;
                            if (scrollY > adOriginalTop) { //(window.innerWidth >= 1024 ? adOriginalTop + 24 : (window.innerWidth>= 968 ? adOriginalTop + 20 : (window.innerWidth >= 835 ? adOriginalTop + 25 : adOriginalTop + 40 )))
                                ad.style.position = 'fixed';
                            } else {
                                ad.style.position = 'static';
                            }
                        }
                    });
                </script>
            </>
        )}
    </div>
</div>
